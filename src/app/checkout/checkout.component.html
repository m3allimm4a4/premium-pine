<section class="shop checkout section">
  <div class="container">
    <form class="form" [formGroup]="checkoutForm" (ngSubmit)="placeOrder()">
      <div class="row">
        <div class="col-lg-8 col-12">
          <div class="checkout-form">
            <h2>Make Your Checkout Here</h2>
            <p>Please register in order to checkout more quickly</p>
            <div class="row">
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>First Name<span>*</span></label>
                  <input
                    type="text"
                    formControlName="firstName"
                    required="required"
                    maxlength="100" />
                  <small *ngIf="displayInvalidFeedback('firstName')" class="invalid-input">
                    First name required
                  </small>
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Last Name<span>*</span></label>
                  <input
                    type="text"
                    formControlName="lastName"
                    required="required"
                    maxlength="100" />
                  <small *ngIf="displayInvalidFeedback('lastName')" class="invalid-input">
                    Last name required
                  </small>
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Email Address<span>*</span></label>
                  <input type="email" formControlName="email" required="required" maxlength="100" />
                  <small *ngIf="displayInvalidFeedback('email')" class="invalid-input">
                    Invalid email
                  </small>
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Phone Number<span>*</span></label>
                  <input type="text" formControlName="phone" required="required" maxlength="100" />
                  <small *ngIf="displayInvalidFeedback('phone')" class="invalid-input">
                    Phone number required
                  </small>
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>City<span>*</span></label>
                  <input type="text" formControlName="city" required="required" maxlength="100" />
                  <small *ngIf="displayInvalidFeedback('phone')" class="invalid-input">
                    City required
                  </small>
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Address Line 1<span>*</span></label>
                  <input
                    type="text"
                    formControlName="address1"
                    required="required"
                    maxlength="255" />
                  <small *ngIf="displayInvalidFeedback('phone')" class="invalid-input">
                    Address line 1 required
                  </small>
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Address Line 2<span>*</span></label>
                  <input
                    type="text"
                    formControlName="address2"
                    required="required"
                    maxlength="255" />
                  <small *ngIf="displayInvalidFeedback('phone')" class="invalid-input">
                    Address line 2 required
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-12">
          <div class="order-details">
            <div class="single-widget">
              <h2>CART TOTALS</h2>
              <div class="content">
                <ul>
                  <li>
                    Sub Total<span>${{ substotal }}</span>
                  </li>
                  <li>
                    (+) Shipping<span>${{ shipping }}</span>
                  </li>
                  <li class="last">
                    Total<span>${{ substotal + shipping }}</span>
                  </li>
                </ul>
              </div>
            </div>

            <div class="single-widget">
              <h2>Payments</h2>
              <div class="content">
                <div class="checkbox">
                  <label class="checkbox-inline checked" for="2">
                    <input name="news" id="2" type="radio" checked /> Cash On Delivery
                  </label>
                </div>
              </div>
            </div>

            <div class="single-widget get-button">
              <div class="content">
                <div class="button">
                  <button
                    class="btn btn-secondary animate"
                    type="submit"
                    [disabled]="!checkoutForm.valid || checkoutDisabled">
                    <div
                      class="spinner-border spinner-border-sm"
                      role="status"
                      *ngIf="checkoutLoading; else checkoutButton"></div>
                    <ng-template #checkoutButton>Proceed To Checkout</ng-template>
                  </button>
                  <small class="invalid-input" *ngIf="!checkoutForm.controls.cartItems.valid">
                    Your cart is empty
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>
